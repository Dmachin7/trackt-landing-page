<header id="site-header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300">
  <nav class="mx-auto flex max-w-6xl items-center justify-between px-5 py-5">
    <!-- Logo -->
    <a href="/">
      <img
        src="/logo/trackt-logo.svg"
        alt="Trackt"
        class="h-10 w-auto md:h-12"
      />
    </a>

    <!-- Desktop nav links -->
    <div class="hidden items-center gap-8 md:flex">
      <a
        href="/#consulting"
        class="text-sm font-medium text-text-secondary transition-colors hover:text-text-primary"
      >Consulting</a>
      <a
        href="/survey"
        class="text-sm font-medium text-text-secondary transition-colors hover:text-text-primary"
      >Survey</a>
    </div>

    <!-- Hamburger button (mobile only) -->
    <button
      id="nav-toggle"
      aria-label="Toggle navigation"
      aria-expanded="false"
      class="relative flex h-10 w-10 items-center justify-center rounded-lg border border-border-subtle text-text-secondary transition-colors hover:text-text-primary md:hidden"
    >
      <!-- Hamburger icon -->
      <svg id="icon-open" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transition-opacity duration-150">
        <line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="18" x2="20" y2="18"/>
      </svg>
      <!-- X icon (overlaid, fades in when open) -->
      <svg id="icon-close" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute opacity-0 transition-opacity duration-150">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
  </nav>

  <!-- Mobile menu (CSS-animated slide + fade) -->
  <div id="nav-menu" class="border-t border-border-subtle bg-bg-dark/95 backdrop-blur-xl md:hidden">
    <div class="px-3 py-2">
      <a
        href="/#consulting"
        class="nav-menu-link block rounded-lg px-4 py-3.5 text-base font-medium text-text-secondary transition-colors duration-150 hover:bg-white/6 hover:text-text-primary"
      >Consulting</a>
      <a
        href="/survey"
        class="nav-menu-link block rounded-lg px-4 py-3.5 text-base font-medium text-text-secondary transition-colors duration-150 hover:bg-white/6 hover:text-text-primary"
      >Survey</a>
    </div>
  </div>
</header>

<script>
  const header = document.getElementById("site-header");
  const navToggle = document.getElementById("nav-toggle");
  const navMenu = document.getElementById("nav-menu");
  const iconOpen = document.getElementById("icon-open");
  const iconClose = document.getElementById("icon-close");

  // Scroll effect
  const onScroll = () => {
    if (window.scrollY > 50) {
      header?.classList.add("bg-bg-dark/80", "backdrop-blur-xl");
    } else {
      header?.classList.remove("bg-bg-dark/80", "backdrop-blur-xl");
    }
  };
  window.addEventListener("scroll", onScroll, { passive: true });
  onScroll();

  // Hamburger toggle
  let isOpen = false;
  navToggle?.addEventListener("click", () => {
    isOpen = !isOpen;
    navMenu?.classList.toggle("is-open", isOpen);
    iconOpen?.classList.toggle("opacity-0", isOpen);
    iconClose?.classList.toggle("opacity-0", !isOpen);
    navToggle.setAttribute("aria-expanded", String(isOpen));
  });

  // Close menu when a link is clicked
  document.querySelectorAll(".nav-menu-link").forEach((link) => {
    link.addEventListener("click", () => {
      isOpen = false;
      navMenu?.classList.remove("is-open");
      iconOpen?.classList.remove("opacity-0");
      iconClose?.classList.add("opacity-0");
      navToggle?.setAttribute("aria-expanded", "false");
    });
  });
</script>
